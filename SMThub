local TeleportService = game:GetService("TeleportService")
local jobidmain = tostring(game.JobId)
jobid = "24f842d4-c2b0-430f-87b2-7520e814f54e"

getgenv().hoppserv = true
getgenv().Autoleave = true

spawn(function()
    while wait(0) do
if jobidmain ~= jobid then do
_G.hoppserv = true
_G.Autoleave = false
    end
end
end
end)


spawn(function()
        while wait(0) do
        pcall(function()
            if game:GetService("Workspace")["_waves_started"].Value == true then 
            _G.Autoleave = true
            else
            end
            end)
            end
        end)

 


if _G.hoppserv == true then do
    wait(0.2)
                    pcall(function()
                        wait(0.3)
                        if game:GetService("Players").LocalPlayer.AlreadyInLobby.Name == "AlreadyInLobby"then
                        if jobidmain ~= jobid then
                            while wait() do
                        TeleportService:TeleportToPlaceInstance(8304191830, jobid)
                        _G.hoppserv = false
                        end
                        end
                else
                end
            end)
        end
    end

spawn(function()
        pcall(function()
        wait(0.5)
	    while wait() do
        if _G.Autoleave == true then
        local CheckEnd = game:GetService("Workspace")["_DATA"].GameFinished

                        if CheckEnd.Value == true then do
                            game:GetService("ReplicatedStorage").endpoints.client_to_server.teleport_back_to_lobby:InvokeServer()
                        end
                        end
end
end
end)
end)
